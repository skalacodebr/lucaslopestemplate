document.addEventListener("DOMContentLoaded",function(){v(),h(),g(),S(),q(),x(),L()});let c=0;const l=3;function v(){const n=document.querySelectorAll(".faq-item");n.forEach(e=>{const t=e.querySelector(".faq-question"),s=e.querySelector(".faq-answer");t&&s&&(s.style.display="none",t.addEventListener("click",()=>{const r=s.style.display!=="none";if(n.forEach(o=>{const a=o.querySelector(".faq-answer"),i=o.querySelector(".faq-icon");a&&o!==e&&(a.style.display="none",i&&(i.style.transform="rotate(0deg)"))}),r){s.style.display="none";const o=t.querySelector(".faq-icon");o&&(o.style.transform="rotate(0deg)")}else{s.style.display="block";const o=t.querySelector(".faq-icon");o&&(o.style.transform="rotate(45deg)")}}))})}function h(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){const s=this.getAttribute("href");if(s==="#")return;const r=document.querySelector(s);if(r){t.preventDefault();const o=r.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:o,behavior:"smooth"})}})})}function g(){const n={threshold:.1,rootMargin:"0px 0px -50px 0px"},e=new IntersectionObserver(o=>{o.forEach(a=>{a.isIntersecting&&a.target.classList.add("animate-fade-in-up")})},n);document.querySelectorAll(".service-card").forEach(o=>{o.style.opacity="0",o.style.transform="translateY(30px)",e.observe(o)}),document.querySelectorAll(".blog-card").forEach(o=>{o.style.opacity="0",o.style.transform="translateY(30px)",e.observe(o)});const r=document.createElement("style");r.textContent=`
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    `,document.head.appendChild(r)}function S(){document.querySelectorAll(".service-card").forEach(e=>{const t=e.querySelector(".service-icon");e.addEventListener("mouseenter",()=>{t&&(t.style.transform="scale(1.1) rotate(5deg)",t.style.transition="transform 0.3s ease")}),e.addEventListener("mouseleave",()=>{t&&(t.style.transform="scale(1) rotate(0deg)")})})}function q(){const n=document.querySelectorAll(".stat-number"),e=new IntersectionObserver(t=>{t.forEach(s=>{if(s.isIntersecting){const r=s.target,o=parseInt(r.textContent.replace(/\D/g,"")),a=r.textContent.replace(/\d/g,"");b(r,0,o,2e3,a),e.unobserve(r)}})},{threshold:.5});n.forEach(t=>{e.observe(t)})}function b(n,e,t,s,r){const o=Date.now();function a(){const i=Date.now()-o,d=Math.min(i/s,1),y=1-Math.pow(1-d,3),p=Math.round(e+(t-e)*y);n.textContent=p+r,d<1&&requestAnimationFrame(a)}a()}function w(){const e=`https://wa.me/5511999999999?text=${encodeURIComponent("Olá! Gostaria de solicitar um orçamento para serviços de SST.")}`;window.open(e,"_blank")}function C(n){new FormData(n);const e=n.querySelector('[type="submit"]'),t=e.textContent;e.textContent="Enviando...",e.disabled=!0,setTimeout(()=>{u("Mensagem enviada com sucesso! Entraremos em contato em breve.","success"),n.reset(),e.textContent=t,e.disabled=!1},2e3)}function u(n,e="info"){const t=document.createElement("div");t.className="fixed top-4 right-4 z-50 p-4 rounded-lg text-white font-medium transition-all duration-300 transform translate-x-full",e==="success"?t.classList.add("bg-green-500"):e==="error"?t.classList.add("bg-red-500"):t.classList.add("bg-blue-500"),t.textContent=n,document.body.appendChild(t),setTimeout(()=>{t.classList.remove("translate-x-full")},100),setTimeout(()=>{t.classList.add("translate-x-full"),setTimeout(()=>{document.body.removeChild(t)},300)},5e3)}function x(){document.querySelector(".services-track")&&setInterval(()=>{f("next")},5e3)}function f(n){const e=document.querySelector(".services-track");document.querySelectorAll(".dot"),e&&(n==="next"?c=(c+1)%l:c=(c-1+l)%l,m())}function E(n){c=n,m()}function m(){const n=document.querySelector(".services-track"),e=document.querySelectorAll(".dot");if(!n)return;const t=-(c*100/l);n.style.transform=`translateX(${t}%)`,e.forEach((s,r)=>{s.classList.toggle("active",r===c)})}function L(){const n=document.getElementById("main-header");n&&window.addEventListener("scroll",()=>{window.scrollY>100?n.classList.add("scrolled"):n.classList.remove("scrolled")})}window.homePageUtils={openWhatsApp:w,handleContactForm:C,showNotification:u,moveCarousel:f,goToSlide:E};
